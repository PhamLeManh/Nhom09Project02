@model MdpProject.Models.MdpPhone

@{
    ViewData["Title"] = "Chi tiết Điện thoại";
    Layout = "~/Views/Shared/_MDPLayout.cshtml";

    // Ảnh sản phẩm (nếu có trong DB thì lấy, nếu không thì dùng ảnh demo)
    var productImages = new List<string>
    {
        !string.IsNullOrEmpty(Model.MdpAnh) ? Model.MdpAnh : Url.Content("~/images/default.png"),
        "https://didongviet.vn/dchannel/wp-content/uploads/2024/03/dien-thoai-gia-re-didongviet-cover.jpg",
        "https://cdn.tgdd.vn/Products/Images/42/329146/iphone-15-plus-hong-thumb-600x600.jpg",
        "https://cdn2.cellphones.com.vn/x358,webp,q100/media/catalog/product/x/i/xiaomi-14-ultra_3.png",
        "https://cdn.tgdd.vn/Products/Images/42/329149/iphone-15-plus-trang-thumb-600x600.jpg"
    };

    var rnd = new Random();
    var additionalImages = productImages.OrderBy(x => rnd.Next()).Take(4).ToList();
}

<div class="container my-4">
    <!-- Nút quay lại -->
    <div class="mb-3">
        <a asp-action="Index" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Quay lại</a>
    </div>

    <div class="row align-items-start mb-5">
        <!-- Ảnh & carousel -->
        <div class="col-md-7">
            <div id="phoneCarousel" class="carousel slide mb-3" data-bs-ride="carousel">
                <div class="carousel-inner">
                    @for (int i = 0; i < additionalImages.Count; i++)
                    {
                        var img = additionalImages[i];
                        <div class="carousel-item @(i==0 ? "active" : "")">
                            <img src="@img" class="d-block w-100 rounded-3" style="height:400px; object-fit:contain;" />
                        </div>
                    }
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#phoneCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#phoneCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
        </div>

        <!-- Thông số kỹ thuật -->
        <div class="col-md-5">
            <div class="card shadow-sm p-4 h-100">
                <h2 class="fw-bold mb-3">@Model.MdpTenPhone</h2>
                <div class="mb-3">
                    <p><strong>Màn hình:</strong> @Model.MdpManHinh</p>
                    <p><strong>Camera:</strong> @Model.MdpCamera</p>
                    <p><strong>Pin:</strong> @Model.MdpPin</p>
                    <p><strong>RAM:</strong> @Model.MdpRam</p>
                    <p><strong>Bộ nhớ:</strong> @Model.MdpStorage</p>
                    <p><strong>Chipset:</strong> @Model.MdpChipset</p>
                    <p><strong>Hệ điều hành:</strong> @Model.MdpHeDieuHanh</p>
                </div>
                <a href="@Url.Action("Index", "MdpProductVariants", new { sanPhamId = Model.MdpSanPhamId })"
                   class="btn btn-success btn-lg w-100">
                    <i class="bi bi-cart-plus"></i> Thêm vào giỏ hàng
                </a>
            </div>
        </div>
    </div>

    <!-- Giới thiệu sản phẩm -->
    <div class="mt-5 p-4 bg-light rounded-4 shadow-sm">
        <h4 class="fw-bold mb-3">Giới thiệu sản phẩm</h4>
        <p>
            Điện thoại <strong>@Model.MdpTenPhone</strong> mang đến trải nghiệm mạnh mẽ với chipset
            <strong>@Model.MdpChipset</strong>, RAM <strong>@Model.MdpRam</strong> và bộ nhớ trong
            <strong>@Model.MdpStorage</strong>.
        </p>
        <p>
            Camera <strong>@Model.MdpCamera</strong> cho hình ảnh sắc nét, màn hình
            <strong>@Model.MdpManHinh</strong> hiển thị sống động và pin <strong>@Model.MdpPin</strong>
            giúp bạn sử dụng cả ngày dài.
        </p>
    </div>

    <!-- Thông số kỹ thuật chi tiết -->
    <div class="mt-4 p-4 bg-white rounded-4 shadow-sm">
        <h4 class="fw-bold mb-3">Thông số kỹ thuật chi tiết</h4>
        <table class="table table-striped">
            <tbody>
                <tr>
                    <th>Mã Điện thoại</th>
                    <td>@Model.MdpPhoneId</td>
                </tr>
                <tr>
                    <th>Tên</th>
                    <td>@Model.MdpTenPhone</td>
                </tr>
                <tr>
                    <th>Màn hình</th>
                    <td>@Model.MdpManHinh</td>
                </tr>
                <tr>
                    <th>Camera</th>
                    <td>@Model.MdpCamera</td>
                </tr>
                <tr>
                    <th>Pin</th>
                    <td>@Model.MdpPin</td>
                </tr>
                <tr>
                    <th>RAM</th>
                    <td>@Model.MdpRam</td>
                </tr>
                <tr>
                    <th>Bộ nhớ</th>
                    <td>@Model.MdpStorage</td>
                </tr>
                <tr>
                    <th>Chipset</th>
                    <td>@Model.MdpChipset</td>
                </tr>
                <tr>
                    <th>Hệ điều hành</th>
                    <td>@Model.MdpHeDieuHanh</td>
                </tr>
                <tr>
                    <th>Ngày tạo</th>
                    <td>@Model.MdpCreatedAt?.ToString("dd/MM/yyyy")</td>
                </tr>
                <tr>
                    <th>Ngày cập nhật</th>
                    <td>@Model.MdpUpdatedAt?.ToString("dd/MM/yyyy")</td>
                </tr>
                <tr>
                    <th>Mã sản phẩm cha</th>
                    <td>@Model.MdpSanPham.MdpSanPhamId</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Thông tin thêm -->
    <div class="mt-5 p-4 bg-light rounded-4 shadow-sm">
        <h4 class="fw-bold mb-3">Thông tin thêm</h4>
        <p>
            Điện thoại này được thiết kế tối ưu cho nhu cầu giải trí, học tập và làm việc.
            Ngoài ra, chipset và dung lượng pin cho phép chơi game, xem phim và sử dụng đa nhiệm mượt mà.
        </p>
    </div>
</div>

<style>
    .carousel-inner img {
        border-radius: 12px;
    }

    .btn-lg {
        min-width: 180px;
    }

    h4 {
        color: #333;
    }

    .shadow-sm {
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
</style>
