@model MdpProject.Models.MdpMonitor

@{
    ViewData["Title"] = "Chi tiết Màn hình";
    Layout = "~/Views/Shared/_MDPLayout.cshtml";

    var productImages = new List<string>();

    // nếu MdpAnh có nhiều ảnh tách bằng dấu ';', split ra
    if (!string.IsNullOrEmpty(Model.MdpAnh))
    {
        productImages = Model.MdpAnh.Split(';').ToList();
    }

    // nếu không có ảnh thì dùng mặc định
    if (productImages.Count == 0)
    {
        productImages.Add(Url.Content("~/images/monitors/default.png"));
    }

    var rnd = new Random();
    var mainImage = productImages[rnd.Next(productImages.Count)];
    var additionalImages = productImages.OrderBy(x => rnd.Next()).Take(4).ToList();
}

<div class="container my-4">
    <!-- Nút quay lại -->
    <div class="mb-3">
        <a asp-action="Index" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Quay lại</a>
    </div>

    <div class="row align-items-start mb-5">
        <!-- Ảnh & carousel -->
        <div class="col-md-7">
            <div id="monitorCarousel" class="carousel slide mb-3" data-bs-ride="carousel">
                <div class="carousel-inner">
                    @for (int i = 0; i < additionalImages.Count; i++)
                    {
                        var img = additionalImages[i];
                        <div class="carousel-item @(i==0 ? "active" : "")">
                            <img src="@img" class="d-block w-100 rounded-3" style="height:400px; object-fit:cover;" />
                        </div>
                    }
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#monitorCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#monitorCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
        </div>

        <!-- Thông số kỹ thuật -->
        <div class="col-md-5">
            <div class="card shadow-sm p-4 h-100">
                <h2 class="fw-bold mb-3">@Model.MdpTenMonitor</h2>
                <div class="mb-3">
                    <p><strong>Kích thước:</strong> @Model.MdpKichThuoc</p>
                    <p><strong>Độ phân giải:</strong> @Model.MdpDoPhanGiai</p>
                    <p><strong>Tần số quét:</strong> @Model.MdpTanSoQuet Hz</p>
                </div>
                <a href="@Url.Action("Index", "MdpProductVariants", new { sanPhamId = Model.MdpSanPhamId })"
                   class="btn btn-success btn-lg w-100">
                    <i class="bi bi-cart-plus"></i> Thêm vào giỏ hàng
                </a>
            </div>
        </div>
    </div>

    <!-- Giới thiệu sản phẩm -->
    <div class="mt-5 p-4 bg-light rounded-4 shadow-sm">
        <h4 class="fw-bold mb-3">Giới thiệu sản phẩm</h4>
        <p>
            Màn hình <strong>@Model.MdpTenMonitor</strong> có độ phân giải cao, tần số quét tốt, mang đến trải nghiệm hình ảnh sắc nét và mượt mà.
        </p>
        <p>
            Kích thước <strong>@Model.MdpKichThuoc</strong> phù hợp với mọi không gian làm việc, giải trí hoặc gaming. Công nghệ màn hình tiên tiến cho màu sắc trung thực và góc nhìn rộng.
        </p>
    </div>

    <!-- Thông số kỹ thuật chi tiết -->
    <div class="mt-4 p-4 bg-white rounded-4 shadow-sm">
        <h4 class="fw-bold mb-3">Thông số kỹ thuật chi tiết</h4>
        <table class="table table-striped">
            <tbody>
                <tr>
                    <th>Mã Monitor</th>
                    <td>@Model.MdpMonitorId</td>
                </tr>
                <tr>
                    <th>Tên Monitor</th>
                    <td>@Model.MdpTenMonitor</td>
                </tr>
                <tr>
                    <th>Kích thước</th>
                    <td>@Model.MdpKichThuoc</td>
                </tr>
                <tr>
                    <th>Độ phân giải</th>
                    <td>@Model.MdpDoPhanGiai</td>
                </tr>
                <tr>
                    <th>Tần số quét</th>
                    <td>@Model.MdpTanSoQuet Hz</td>
                </tr>
                <tr>
                    <th>Ngày tạo</th>
                    <td>@Model.MdpCreatedAt?.ToString("dd/MM/yyyy")</td>
                </tr>
                <tr>
                    <th>Ngày cập nhật</th>
                    <td>@Model.MdpUpdatedAt?.ToString("dd/MM/yyyy")</td>
                </tr>
                <tr>
                    <th>Mã sản phẩm cha</th>
                    <td>@Model.MdpSanPhamId</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

<style>
    .carousel-inner img {
        border-radius: 12px;
    }

    .btn-lg {
        min-width: 180px;
    }

    h4 {
        color: #333;
    }

    .shadow-sm {
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
</style>
